# Use root/example as user/password credentials
version: "3.1"

services:
  mongo:
    image: mongo
    restart: always
    environment:
      MONGO_INITDB_ROOT_USERNAME: root
      MONGO_INITDB_ROOT_PASSWORD: mongo4all

  #  mongo-express:
  #    image: mongo-express
  #    restart: always
  #    networks:
  #      - backend
  #    ports:
  #      - 8081:8081
  #    environment:
  #      ME_CONFIG_MONGODB_ADMINUSERNAME: root
  #      ME_CONFIG_MONGODB_ADMINPASSWORD: example
  #      ME_CONFIG_MONGODB_URL: mongodb://root:mongo4all@mongo:27017/

  grpc-service:
    build: ./GrpcService1
#    image: grpc-service
    restart: always
 #   volumes:
 #     - .:/GrpcService1
    depends_on: 
     - mongo
    ports:
     - 8081:80
    links:
      - "mongo:database"

  web-api:
    build: ./WebAPIService
#    image: web-api
    restart: always
#    volumes:
#      - ./WebAPIService:/WebAPIService
    depends_on: 
      - grpc-service
    links:
      - "grpc-service:backend"
    ports: 
      - 8080:80
      - 444:443
      - 49163:49163